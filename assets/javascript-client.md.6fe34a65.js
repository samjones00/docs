import{R as t}from"./ref-servicestack-client.2229c047.js";import{o as e,c as p,d as o,u as c,a,b as n,e as s}from"./app.da189b1e.js";const i=a(`<p>Whilst you can use any of the multitude of Ajax libraries to consume ServiceStack&#39;s pure JSON REST APIs, leveraging the <a href="/typescript-add-servicestack-reference">integrated TypeScript</a> support still offers the best development UX for calling ServiceStack&#39;s JSON APIs in JavaScript where you can use the TypeScript <code>JsonServiceClient</code> with <a href="/typescript-add-servicestack-reference#typescript-serviceclient">TypeScript Add ServiceStack Reference</a> DTO&#39;s to get the same productive end-to-end Typed APIs available in ServiceStack&#39;s Typed .NET Clients, e.g:</p><div class="language-ts"><pre><code><span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>baseUrl<span class="token punctuation">)</span>

client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> Name<span class="token operator">:</span> <span class="token string">&#39;World&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>Result<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="instant-typed-javascript-dtos-\u{1F680}" tabindex="-1">Instant Typed JavaScript DTOs \u{1F680} <a class="header-anchor" href="#instant-typed-javascript-dtos-\u{1F680}" aria-hidden="true">#</a></h2><p>Ultimately the key to maximizing productivity is avoiding things that interrupt your dev workflow. Since we use <code>JsonServiceClient</code> for all API requests one area that still interrupts us is regenerating TypeScript <code>dtos.ts</code> after adding new APIs, as it was the only way to generate typed DTOs for use in the generic <code>JsonServiceClient</code> in both Vanilla JS and TypeScript Apps.</p><p>For Vanilla JS Apps typically this means running the <a href="/typescript-add-servicestack-reference#simple-command-line-utilities-for-typescript">x dotnet tool</a> to update <code>dtos.ts</code>, then using TypeScript to compile it to JavaScript:</p><div class="language-bash"><pre><code>$ x ts <span class="token operator">&amp;&amp;</span> tsc dtos.ts 
</code></pre></div><p>While not a great hindrance, it can frequently interrupt our workflow when developing new APIs.</p><p>Although thanks to the <strong>native JavaScript Language</strong> support this can be avoided by referencing Typed JavaScript DTOs directly from <strong>/types/js</strong></p><p>Since importing JavaScript doesn&#39;t require any tooling or build steps, it greatly simplifies calling ServiceStack APIs from <strong>Vanilla JS</strong> Apps which all our <a href="https://servicestack.net/start" target="_blank" rel="noopener noreferrer">.NET 6 Empty Project Templates</a> take advantage of for its now optimal friction-less dev model.</p><p>Using <strong>/types/js</strong> has the same behavior as using <code>dtos.js</code> generated from <code>$ tsc dtos.ts</code> whose outputs are identical, i.e. both containing your API DTOs generated in CommonJS format. It&#39;s feasible to simulate the TypeScript compiler&#39;s output in this instance as ServiceStack only needs to generate DTO Types and Enums to enable its end-to-end API, and not any other of TypeScript&#39;s vast featureset.</p><h2 id="using-javascript-typed-dtos-in-web-apps" tabindex="-1">Using JavaScript Typed DTOs in Web Apps <a class="header-anchor" href="#using-javascript-typed-dtos-in-web-apps" aria-hidden="true">#</a></h2><p>To get started quickly you can use the <code>init</code> <a href="/mix-tool">mix gist</a> to create an empty .NET project:</p>`,12),l=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"mkdir ProjectName && cd ProjectName")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),r=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix init")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),u=a(`<p>That uses the built-in <code>@servicestack/client</code> library&#39;s <code>JsonServiceClient</code> in a dependency-free Web Page:</p><p>To make typed API Requests from web pages, you need only include <code>/js/require.js</code> containing a simple <code>require()</code> to load <strong>CommonJS</strong> libraries, <code>/js/servicestack-client.js</code> (production build of <a href="https://github.com/ServiceStack/servicestack-client" target="_blank" rel="noopener noreferrer">@servicestack/client</a>) and <code>/types/js</code> containing your APIs typed JS DTOs - all built-in ServiceStack.</p><p>After which you&#39;ll have access to full feature-set of the generic <code>JsonServiceClient</code> with your APIs Typed Request DTOs, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/require.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/servicestack-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/types/js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Which utilizes the <a href="/javascript-add-servicestack-reference">JavaScript Add ServiceStack Reference</a> <strong>/types/js</strong> to instantly generate JavaScript Types for all your APIs DTOs which can immediately be used with the <a href="/typescript-add-servicestack-reference#typescript-serviceclient">TypeScript JsonServiceClient</a> to make Typed API requests:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> <span class="token punctuation">{</span> JsonServiceClient<span class="token punctuation">,</span> Hello <span class="token punctuation">}</span> <span class="token operator">=</span> exports

<span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">callHello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> r<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="jsonserviceclient" tabindex="-1">JsonServiceClient <a class="header-anchor" href="#jsonserviceclient" aria-hidden="true">#</a></h2><h3 id="api-method" tabindex="-1">API method <a class="header-anchor" href="#api-method" aria-hidden="true">#</a></h3><p>The <code>api</code> returns a typed <code>ApiResult&lt;Response&gt;</code> Value Result that encapsulates either a Typed Response or a structured API Error populated in <code>ResponseStatus</code> allowing you to handle API responses programmatically without <code>try/catch</code> handling:</p><div class="language-ts"><pre><code><span class="token keyword">const</span> api <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>failed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Greeting failed! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>e<span class="token punctuation">.</span>errorCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>e<span class="token punctuation">.</span>errorMessage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">API Says: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>api<span class="token punctuation">.</span>response<span class="token punctuation">.</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token comment">//api.succeeded</span>
</code></pre></div><h3 id="simplified-api-handling" tabindex="-1">Simplified API Handling <a class="header-anchor" href="#simplified-api-handling" aria-hidden="true">#</a></h3><p>Being able to treat errors as values greatly increases the ability to programmatically handle and genericise api handling and greatly simplifies functionality needing to handle both successful and error responses like binding to UI components.</p><p>An example of this is below where we&#39;re able to concurrently fire off multiple unrelated async requests in parallel, wait for them all to complete, print out the ones that have succeeded or failed then access their strong typed responses:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> JsonServiceClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@servicestack/client&quot;</span>

<span class="token keyword">let</span> requests<span class="token operator">:</span>ApiRequest<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">AppOverview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">// GET =&gt; AppOverviewResponse</span>
    <span class="token keyword">new</span> <span class="token class-name">DeleteTechnology</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token comment">// DELETE =&gt; IReturnVoid (requires auth) </span>
    <span class="token keyword">new</span> <span class="token class-name">GetAllTechnologies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// GET =&gt; GetAllTechnologiesResponse</span>
    <span class="token keyword">new</span> <span class="token class-name">GetAllTechnologyStacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// GET =&gt; GetAllTechnologyStacksResponse</span>
<span class="token punctuation">]</span>

<span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>requests<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span> request<span class="token punctuation">,</span> api<span class="token operator">:</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token keyword">as</span> ApiResponse<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> failed <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>api<span class="token punctuation">.</span>failed<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>failed<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> failed:</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
failed<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>x<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Request Failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>failed<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>api<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> succeeded <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>api<span class="token punctuation">.</span>succeeded<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>succeeded<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> succeeded: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>succeeded<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>

<span class="token keyword">let</span> r <span class="token operator">=</span> succeeded<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&#39;AppOverview&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span>api<span class="token punctuation">.</span>response <span class="token keyword">as</span> AppOverviewResponse
<span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Top 5 Technologies: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>r<span class="token punctuation">.</span>topTechnologies<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">tech</span> <span class="token operator">=&gt;</span> tech<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre></div><p>Output:</p><div class="language-"><pre><code>1 failed
DeleteTechnology Request Failed: Unauthorized

3 succeeded: AppOverview, GetAllTechnologies, GetAllTechnologyStacks
Top 5 Technologies: Redis, MySQL, Amazon EC2, Nginx
</code></pre></div><p>Being able to treat Errors as values has dramatically reduced the effort required to accomplish the same feat if needing to handle errors with <code>try/catch</code>.</p><h3 id="ideal-typed-message-based-api" tabindex="-1">Ideal Typed Message-based API <a class="header-anchor" href="#ideal-typed-message-based-api" aria-hidden="true">#</a></h3><p>The TypeScript <code>JsonServiceClient</code> enables the same productive, typed API development experience available in ServiceStack&#39;s other <a href="http://docs.servicestack.net/typescript-add-servicestack-reference" target="_blank" rel="noopener noreferrer">1st-class supported client platforms</a>.</p><p>The <code>JsonServiceClient</code> leverages the additional type hints ServiceStack embeds in each TypeScript Request DTO to achieve the ideal typed, message-based API - so all API requests benefit from a succinct, boilerplate-free Typed API.</p><p>Here&#39;s a quick look at what it looks like. The example below shows how to create a <a href="https://github.com/ServiceStack/Gistlyn" target="_blank" rel="noopener noreferrer">C# Gist in Gistlyn</a> after adding a <a href="http://docs.servicestack.net/typescript-add-servicestack-reference" target="_blank" rel="noopener noreferrer">TypeScript ServiceStack Reference</a> to <code>gistlyn.com</code> and installing the <a href="https://www.npmjs.com/package/@servicestack/client" target="_blank" rel="noopener noreferrer">@servicestack/client</a> npm package:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> JsonServiceClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@servicestack/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> StoreGist<span class="token punctuation">,</span> GithubFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./dtos&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&quot;https://gistlyn.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoreGist</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    files<span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token punctuation">[</span>file<span class="token punctuation">.</span>filename<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">GithubFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            filename<span class="token operator">:</span> <span class="token string">&#39;main.cs&#39;</span><span class="token punctuation">,</span>
            content<span class="token operator">:</span> <span class="token string">&#39;var greeting = &quot;Hi, from TypeScript!&quot;;&#39;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> api <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//response:StoreGistResponse</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>succeeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">New C# Gist was created with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>r<span class="token punctuation">.</span>gist<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">https://gist.cafe/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>r<span class="token punctuation">.</span>gist<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to create Gist: &quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where the <code>response</code> param is typed to <code>StoreGistResponse</code> DTO Type.</p><h3 id="sending-additional-arguments-with-typed-api-requests" tabindex="-1">Sending additional arguments with Typed API Requests <a class="header-anchor" href="#sending-additional-arguments-with-typed-api-requests" aria-hidden="true">#</a></h3><p>Many AutoQuery Services utilize <a href="http://docs.servicestack.net/autoquery-rdbms#implicit-conventions" target="_blank" rel="noopener noreferrer">implicit conventions</a> to query fields that aren&#39;t explicitly defined on AutoQuery Request DTOs, these can now be queried by specifying additional arguments with the typed Request DTO, e.g:</p><div class="language-ts"><pre><code><span class="token comment">//typed to QueryResponse&lt;TechnologyStack&gt; </span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FindTechStacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> VendorName<span class="token operator">:</span> <span class="token string">&quot;ServiceStack&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which will <a href="http://techstacks.io/ss_admin/autoquery/FindTechStacks" target="_blank" rel="noopener noreferrer">return TechStacks</a> developed by ServiceStack.</p><h3 id="calling-apis-with-custom-urls" tabindex="-1">Calling APIs with Custom URLs <a class="header-anchor" href="#calling-apis-with-custom-urls" aria-hidden="true">#</a></h3><p>You can call Services using relative or absolute urls, e.g:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>GetTechnologyResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;/technology/ServiceStack&quot;</span><span class="token punctuation">)</span>

client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>GetTechnologyResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;http://techstacks.io/technology/ServiceStack&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// GET http://techstacks.io/technology?Slug=ServiceStack</span>
client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>GetTechnologyResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;/technology&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Slug<span class="token operator">:</span> <span class="token string">&quot;ServiceStack&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><p>as well as POST Request DTOs to custom urls:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span><span class="token function">postToUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/custom-path&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token punctuation">{</span> Slug<span class="token operator">:</span> <span class="token string">&quot;ServiceStack&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">putToUrl</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.org/custom-path&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="raw-data-responses" tabindex="-1">Raw Data Responses <a class="header-anchor" href="#raw-data-responses" aria-hidden="true">#</a></h3><p>The <code>JsonServiceClient</code> also supports Raw Data responses like <code>string</code> and <code>byte[]</code> which also get a Typed API once declared on Request DTOs using the <code>IReturn&lt;T&gt;</code> marker:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReturnString</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReturnBytes</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>Which can then be accessed as normal, with their Response typed to a JavaScript <code>string</code> or <code>Uint8Array</code> for raw <code>byte[]</code> responses:</p><div class="language-ts"><pre><code><span class="token keyword">let</span> str<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReturnString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> data<span class="token operator">:</span>Uint8Array <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReturnBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="authenticating-using-basic-auth" tabindex="-1">Authenticating using Basic Auth <a class="header-anchor" href="#authenticating-using-basic-auth" aria-hidden="true">#</a></h3><p>Basic Auth support is implemented in <code>JsonServiceClient</code> and follows the same API made available in the C# Service Clients where the <code>userName/password</code> properties can be set individually, e.g:</p><div class="language-ts"><pre><code><span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>baseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>userName <span class="token operator">=</span> user<span class="token punctuation">;</span>
client<span class="token punctuation">.</span>password <span class="token operator">=</span> pass<span class="token punctuation">;</span>

<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecureRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or use <code>client.setCredentials()</code> to have them set both together.</p><h3 id="authenticating-using-credentials" tabindex="-1">Authenticating using Credentials <a class="header-anchor" href="#authenticating-using-credentials" aria-hidden="true">#</a></h3><p>Alternatively you can authenticate using userName/password credentials by <a href="http://docs.servicestack.net/typescript-add-servicestack-reference#add-typescript-reference" target="_blank" rel="noopener noreferrer">adding a TypeScript Reference</a> to your remote ServiceStack Instance and sending a populated <code>Authenticate</code> Request DTO, e.g:</p><div class="language-ts"><pre><code><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    provider<span class="token operator">:</span> <span class="token string">&quot;credentials&quot;</span><span class="token punctuation">,</span> userName<span class="token punctuation">,</span> password<span class="token punctuation">,</span> rememberMe<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will populate the <code>JsonServiceClient</code> with <a href="http://docs.servicestack.net/sessions#cookie-session-ids" target="_blank" rel="noopener noreferrer">Session Cookies</a> which will transparently be sent on subsequent requests to make authenticated requests.</p><h3 id="authenticating-using-jwt" tabindex="-1">Authenticating using JWT <a class="header-anchor" href="#authenticating-using-jwt" aria-hidden="true">#</a></h3><p>Use the <code>bearerToken</code> property to Authenticate with a <a href="http://docs.servicestack.net/jwt-authprovider" target="_blank" rel="noopener noreferrer">ServiceStack JWT Provider</a> using a JWT Token:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span>bearerToken <span class="token operator">=</span> jwtToken<span class="token punctuation">;</span>
</code></pre></div><p>Alternatively you can use a <a href="http://docs.servicestack.net/jwt-authprovider#refresh-tokens" target="_blank" rel="noopener noreferrer">Refresh Token</a> instead:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span>refreshToken <span class="token operator">=</span> refreshToken<span class="token punctuation">;</span>
</code></pre></div><h3 id="authenticating-using-an-api-key" tabindex="-1">Authenticating using an API Key <a class="header-anchor" href="#authenticating-using-an-api-key" aria-hidden="true">#</a></h3><p>Use the <code>bearerToken</code> property to Authenticate with an <a href="http://docs.servicestack.net/api-key-authprovider" target="_blank" rel="noopener noreferrer">API Key</a>:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span>bearerToken <span class="token operator">=</span> apiKey<span class="token punctuation">;</span>
</code></pre></div><h3 id="transparently-handle-401-unauthorized-responses" tabindex="-1">Transparently handle 401 Unauthorized Responses <a class="header-anchor" href="#transparently-handle-401-unauthorized-responses" aria-hidden="true">#</a></h3><p>If the server returns a 401 Unauthorized Response either because the client was Unauthenticated or the configured Bearer Token or API Key used had expired or was invalidated, you can use <code>onAuthenticationRequired</code> callback to re-configure the client before automatically retrying the original request, e.g:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span><span class="token function-variable function">onAuthenticationRequired</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> authClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>authBaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    authClient<span class="token punctuation">.</span>userName <span class="token operator">=</span> userName<span class="token punctuation">;</span>
    authClient<span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> authClient<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span>bearerToken <span class="token operator">=</span> response<span class="token punctuation">.</span>bearerToken<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//Automatically retries requests returning 401 Responses with new bearerToken</span>
<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Secured</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="automatically-refresh-access-tokens" tabindex="-1">Automatically refresh Access Tokens <a class="header-anchor" href="#automatically-refresh-access-tokens" aria-hidden="true">#</a></h3><p>With the <a href="http://docs.servicestack.net/jwt-authprovider#refresh-tokens" target="_blank" rel="noopener noreferrer">Refresh Token support in JWT</a> you can use the <code>refreshToken</code> property to instruct the Service Client to automatically fetch new JWT Tokens behind the scenes before automatically retrying failed requests due to invalid or expired JWTs, e.g:</p><div class="language-ts"><pre><code><span class="token comment">//Authenticate to get new Refresh Token</span>
<span class="token keyword">const</span> authClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>authBaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
authClient<span class="token punctuation">.</span>userName <span class="token operator">=</span> userName<span class="token punctuation">;</span>
authClient<span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
<span class="token keyword">const</span> authResponse <span class="token operator">=</span> <span class="token keyword">await</span> authClient<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Configure client with RefreshToken</span>
client<span class="token punctuation">.</span>refreshToken <span class="token operator">=</span> authResponse<span class="token punctuation">.</span>RefreshToken<span class="token punctuation">;</span>

<span class="token comment">//Call authenticated Services and clients will automatically retrieve new JWT Tokens as needed</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Secured</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use the <code>refreshTokenUri</code> property when refresh tokens need to be sent to a different ServiceStack Server, e.g:</p><div class="language-ts"><pre><code>client<span class="token punctuation">.</span>refreshToken <span class="token operator">=</span> refreshToken<span class="token punctuation">;</span>
client<span class="token punctuation">.</span>refreshTokenUri <span class="token operator">=</span> authBaseUrl <span class="token operator">+</span> <span class="token string">&quot;/access-token&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="serverevents-client" tabindex="-1"><a href="http://docs.servicestack.net/typescript-server-events-client" target="_blank" rel="noopener noreferrer">ServerEvents Client</a> <a class="header-anchor" href="#serverevents-client" aria-hidden="true">#</a></h3><p>The <a href="http://docs.servicestack.net/typescript-server-events-client" target="_blank" rel="noopener noreferrer">TypeScript ServerEventClient</a> is an idiomatic port of ServiceStack&#39;s <a href="http://docs.servicestack.net/csharp-server-events-client" target="_blank" rel="noopener noreferrer">C# Server Events Client</a> in native TypeScript providing a productive client to consume ServiceStack&#39;s <a href="http://docs.servicestack.net/server-events" target="_blank" rel="noopener noreferrer">real-time Server Events</a> that can be used in TypeScript <a href="https://github.com/ServiceStackApps/typescript-server-events" target="_blank" rel="noopener noreferrer">Web, Node.js Server and React Native iOS and Android Mobile Apps</a>.</p><div class="language-ts"><pre><code><span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerEventsClient</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> channels<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    handlers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">onConnect</span><span class="token operator">:</span> <span class="token punctuation">(</span>sub<span class="token operator">:</span>ServerEventConnect<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// Successful SSE connection</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;You&#39;ve connected! welcome &quot;</span> <span class="token operator">+</span> sub<span class="token punctuation">.</span>displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onJoin</span><span class="token operator">:</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span>ServerEventJoin<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token comment">// User has joined subscribed channel</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome, &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">.</span>displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onLeave</span><span class="token operator">:</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span>ServerEventLeave<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// User has left subscribed channel</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>displayName <span class="token operator">+</span> <span class="token string">&quot; has left the building&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onUpdate</span><span class="token operator">:</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span>ServerEventUpdate<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// User channel subscription was changed</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>displayName <span class="token operator">+</span> <span class="token string">&quot; channels subscription were updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token function-variable function">onMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span>ServerEventMessage<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// Invoked for each other message</span>
        <span class="token comment">//... Register custom handlers</span>
        <span class="token function-variable function">announce</span><span class="token operator">:</span> <span class="token punctuation">(</span>text<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment">// Handle messages with simple argument</span>
        <span class="token function-variable function">chat</span><span class="token operator">:</span> <span class="token punctuation">(</span>chatMsg<span class="token operator">:</span>ChatMessage<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment">// Handle messages with complex type argument</span>
        <span class="token function-variable function">CustomMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span>CustomMessage<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Handle complex types with default selector</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    receivers<span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token comment">//... Register any receivers</span>
        tv<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">watch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment">// Handle &#39;tv.watch {url}&#39; messages </span>
                <span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#tv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;youtu.be&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token function">splitOnLast</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> templates<span class="token punctuation">.</span>youtube<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{id}&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> templates<span class="token punctuation">.</span>generic<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{id}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">off</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment">// Handle &#39;tv.off&#39; messages</span>
                <span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#tv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
                el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onException</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span>Error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                 <span class="token comment">// Invoked on each Error</span>
    <span class="token function-variable function">onReconnect</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span>Error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                  <span class="token comment">// Invoked after each auto-reconnect</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;theEvent&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span>e<span class="token operator">:</span>ServerEventMessage<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// Add listener for pub/sub event trigger</span>
<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                             <span class="token comment">// Start listening for Server Events!</span>
</code></pre></div><p>When publishing a DTO Type for your Server Events message, your clients will be able to benefit from the generated DTOs in <a href="http://docs.servicestack.net/typescript-add-servicestack-reference" target="_blank" rel="noopener noreferrer">TypeScript ServiceStack References</a>.</p><h2 id="rich-intelli-sense-support" tabindex="-1">Rich intelli-sense support <a class="header-anchor" href="#rich-intelli-sense-support" aria-hidden="true">#</a></h2><p>Even pure HTML/JS Apps that don&#39;t use TypeScript or any external dependencies will still benefit from the Server generated <code>dtos.ts</code> and <code>servicestack-client.d.ts</code> definitions as Smart IDEs like <a href="https://www.jetbrains.com/rider/" target="_blank" rel="noopener noreferrer">Rider</a> can make use of them to provide a rich productive development UX on both the built-in <code>/js/servicestack-client.js</code> library:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/init-rider-ts-client.png" alt=""></p><p>As well as your App&#39;s server generated DTOs:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/init-rider-ts-dto.png" alt=""></p><p>Including their typed partial constructors:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/init-rider-ts-dto-props.png" alt=""></p><p>So even simple Apps without complex bundling solutions or external dependencies can still benefit from a rich typed authoring experience without any additional build time or tooling complexity.</p><h3 id="cdn-resources" tabindex="-1">CDN Resources <a class="header-anchor" href="#cdn-resources" aria-hidden="true">#</a></h3><p>An CDN alternative to using the <code>@servicestack/client</code> built into <code>ServiceStack.dll</code> is to reference it from <a href="http://unpkg.com" target="_blank" rel="noopener noreferrer">unpkg.com</a>:</p><ul><li><a href="https://unpkg.com/@servicestack/client" target="_blank" rel="noopener noreferrer">https://unpkg.com/@servicestack/client</a></li><li><a href="https://unpkg.com/@servicestack/client/dist/servicestack-client.min.js" target="_blank" rel="noopener noreferrer">servicestack-client.min.js</a> (minified)</li></ul><p>If needed for IDE intelli-sense, the TypeScript definition for the <code>@servicestack/client</code> is available from:</p><ul><li><a href="https://unpkg.com/@servicestack/client/dist/index.d.ts" target="_blank" rel="noopener noreferrer">https://unpkg.com/@servicestack/client/dist/index.d.ts</a></li></ul><p>The npm-free <a href="/templates-lite">Vue and React lite Templates</a> are some examples that makes use of the stand-alone <code>@servicestack/client</code> libraries.</p><h3 id="using-typescript-jsonserviceclient-in-npm-projects" tabindex="-1">Using TypeScript JsonServiceClient in npm projects <a class="header-anchor" href="#using-typescript-jsonserviceclient-in-npm-projects" aria-hidden="true">#</a></h3><p>The <a href="https://www.npmjs.com/package/@servicestack/client" target="_blank" rel="noopener noreferrer">/@servicestack/client</a> follows the recommended guidance for TypeScript modules which doesn&#39;t bundle any TypeScript <code>.ts</code> source files, just the generated <a href="https://unpkg.com/@servicestack/client" target="_blank" rel="noopener noreferrer">index.js</a> and <a href="https://unpkg.com/@servicestack/client@1.0.31/dist/index.d.ts" target="_blank" rel="noopener noreferrer">index.d.ts</a> Type definitions which can be imported the same way in both JavaScript and TypeScript npm projects as any other module, e.g:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> JsonServiceClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@servicestack/client&quot;</span>
</code></pre></div><p>Which can then be used with the generated DTOs from your API at <a href="https://techstacks.io/types/typescript" target="_blank" rel="noopener noreferrer">/types/typescript</a> that can either be downloaded and saved to a local file e.g. <code>dtos.ts</code> or preferably downloaded using the <a href="/dotnet-tool">x dotnet tool</a> to download the DTOs of a remote ServiceStack API with:</p>`,83),k=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"dotnet tool install --global x")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),d=n("p",null,"Then generate DTOs with:",-1),h=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,[n("code",null,"x typescript http://yourdomain.org")])])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),g=n("p",null,[s("For JavaScript projects that haven't configured transpilation of TypeScript, you'll need to use TypeScript to generate the "),n("code",null,"dtos.js"),s(" JavaScript version which can be used instead:")],-1),v=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"tsc dtos.ts")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),m=n("p",null,[s("Use the "),n("a",{href:"https://www.typescriptlang.org/docs/handbook/compiler-options.html",target:"_blank",rel:"noopener noreferrer"},"--module compiler flag"),s(" if needing to generate a specific module version, e.g:")],-1),y=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"tsc -m ES6 dtos.ts")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),w=a(`<p>The generated <code>dtos.js</code> can then be used with the <code>JsonServiceClient</code> to provide a succinct Typed API:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GetConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./dtos&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GetConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="updating-dtos" tabindex="-1">Updating DTOs <a class="header-anchor" href="#updating-dtos" aria-hidden="true">#</a></h4><p>To update your generated DTOs when your server API changes, run <code>x typescript</code> or its shorter <code>x ts</code> alias without any arguments:</p>`,4),f=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x ts")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),b=a(`<p>Which will update to the latest version of <code>dtos.ts</code>. This can be easily automated with an [npm script][5], e.g:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dtos&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd path/to/dtos &amp;&amp; x ts &amp;&amp; tsc -m ES6 dtos.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which will let you update and compile the dtos with:</p>`,3),S=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"npm run dtos")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),T=n("p",null,[s("The [TechStacks][6] (Vue/Nuxt) and [React Native Mobile App][7] (React) are examples of JavaScript-only projects using the TypeScript "),n("code",null,"JsonServiceClient"),s(" in this way.")],-1),x=n("h2",{id:"install",tabindex:"-1"},[s("Install "),n("a",{class:"header-anchor",href:"#install","aria-hidden":"true"},"#")],-1),J='{"title":"JavaScript Client","description":"","frontmatter":{"slug":"javascript-client","title":"JavaScript Client"},"headers":[{"level":2,"title":"Instant Typed JavaScript DTOs \u{1F680}","slug":"instant-typed-javascript-dtos-\u{1F680}"},{"level":2,"title":"Using JavaScript Typed DTOs in Web Apps","slug":"using-javascript-typed-dtos-in-web-apps"},{"level":2,"title":"JsonServiceClient","slug":"jsonserviceclient"},{"level":3,"title":"API method","slug":"api-method"},{"level":3,"title":"Simplified API Handling","slug":"simplified-api-handling"},{"level":3,"title":"Ideal Typed Message-based API","slug":"ideal-typed-message-based-api"},{"level":3,"title":"Sending additional arguments with Typed API Requests","slug":"sending-additional-arguments-with-typed-api-requests"},{"level":3,"title":"Calling APIs with Custom URLs","slug":"calling-apis-with-custom-urls"},{"level":3,"title":"Raw Data Responses","slug":"raw-data-responses"},{"level":3,"title":"Authenticating using Basic Auth","slug":"authenticating-using-basic-auth"},{"level":3,"title":"Authenticating using Credentials","slug":"authenticating-using-credentials"},{"level":3,"title":"Authenticating using JWT","slug":"authenticating-using-jwt"},{"level":3,"title":"Authenticating using an API Key","slug":"authenticating-using-an-api-key"},{"level":3,"title":"Transparently handle 401 Unauthorized Responses","slug":"transparently-handle-401-unauthorized-responses"},{"level":3,"title":"Automatically refresh Access Tokens","slug":"automatically-refresh-access-tokens"},{"level":3,"title":"ServerEvents Client","slug":"serverevents-client"},{"level":2,"title":"Rich intelli-sense support","slug":"rich-intelli-sense-support"},{"level":3,"title":"CDN Resources","slug":"cdn-resources"},{"level":3,"title":"Using TypeScript JsonServiceClient in npm projects","slug":"using-typescript-jsonserviceclient-in-npm-projects"},{"level":2,"title":"Install","slug":"install"}],"relativePath":"javascript-client.md","lastUpdated":1651683703523}',_={};function q(A){return(C,j)=>(e(),p("div",null,[i,l,r,u,k,d,h,g,v,m,y,w,f,b,S,T,x,o(c(t))]))}const P=Object.assign(_,{setup:q});export{J as __pageData,P as default};
