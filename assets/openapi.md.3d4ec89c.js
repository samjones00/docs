import{_ as e,a as t,b as o,c as p,d as c,e as i,f as r,g as l,h as u}from"./chunks/8-created.67fd7241.js";import{_ as d,c as k,o as g,b as n,e as a,a as s}from"./app.6a524bd5.js";var h="/assets/bearer-auth.d6d4b2f2.png",m="/assets/1-search.9c5409bb.png";const B='{"title":"Open API","description":"","frontmatter":{"slug":"openapi","title":"Open API"},"headers":[{"level":2,"title":"Installation","slug":"installation"},{"level":2,"title":"Open API Attributes","slug":"open-api-attributes"},{"level":3,"title":"Group APIs with Tags","slug":"group-apis-with-tags"},{"level":3,"title":"Exclude Services from Metadata Pages","slug":"exclude-services-from-metadata-pages"},{"level":3,"title":"Operation filters","slug":"operation-filters"},{"level":3,"title":"Properties naming conventions","slug":"properties-naming-conventions"},{"level":3,"title":"Change default Verbs","slug":"change-default-verbs"},{"level":3,"title":"Miscellaneous configuration options","slug":"miscellaneous-configuration-options"},{"level":2,"title":"Virtual File System","slug":"virtual-file-system"},{"level":3,"title":"Overriding OpenAPI Embedded Resources","slug":"overriding-openapi-embedded-resources"},{"level":3,"title":"Swagger UI Security","slug":"swagger-ui-security"},{"level":3,"title":"Basic Auth in OpenAPI","slug":"basic-auth-in-openapi"},{"level":2,"title":"Generating AutoRest client","slug":"generating-autorest-client"},{"level":3,"title":"AutoRest Generated Clients vs Add ServiceStack Reference","slug":"autorest-generated-clients-vs-add-servicestack-reference"},{"level":3,"title":"Known issues","slug":"known-issues"},{"level":2,"title":"Publish Azure Management API","slug":"publish-azure-management-api"}],"relativePath":"openapi.md"}',w={},v=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/openapi/openapi-banner.png",alt:""})],-1),b=n("p",null,[n("a",{href:"https://www.openapis.org/",target:"_blank",rel:"noopener noreferrer"},"Open API"),a(" is a specification and complete framework implementation for describing, producing, consuming, and visualizing RESTful web services. ServiceStack implements the "),n("a",{href:"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md",target:"_blank",rel:"noopener noreferrer"},"OpenAPI Spec"),a(" back-end and embeds the Swagger UI front-end in a separate plugin which is available under "),n("a",{href:"http://nuget.org/packages/ServiceStack.Api.OpenApi/",target:"_blank",rel:"noopener noreferrer"},"OpenAPI NuGet package"),a(":")],-1),f=n("div",{class:"nuget-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-700"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle text-lg text-white"},[n("p",null,[n("code",null,'<PackageReference Include="ServiceStack.Api.OpenApi" Version="6.*" />')])])]),n("div",{class:"flex"},[n("div",{class:"bg-sky-500 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),y=s(`<h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-hidden="true">#</a></h2><p>You can enable Open API by registering the <code>OpenApiFeature</code> plugin in AppHost with:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Uncomment CORS feature if it needs to be accessible from external sites </span>
    <span class="token comment">// Plugins.Add(new CorsFeature()); </span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then you will be able to view the Swagger UI from <code>/swagger-ui/</code>. A link to <strong>Swagger UI</strong> will also be available from your <code>/metadata</code> <a href="/metadata-page">Metadata Page</a>.</p><h2 id="open-api-attributes" tabindex="-1">Open API Attributes <a class="header-anchor" href="#open-api-attributes" aria-hidden="true">#</a></h2><p>Each route could have a separate summary and description. You can set it with <code>Route</code> attribute:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> Summary <span class="token operator">=</span> <span class="token string">@&quot;Default hello service.&quot;</span><span class="token punctuation">,</span> 
    Notes <span class="token operator">=</span> <span class="token string">&quot;Longer description for hello service.&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre></div><p>You can set specific description for each HTTP method like shown below:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/hello/{Name}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> Summary<span class="token operator">=</span><span class="token string">&quot;Says &#39;Hello&#39; to provided Name&quot;</span><span class="token punctuation">,</span> 
    Notes <span class="token operator">=</span> <span class="token string">&quot;Longer description of the GET method which says &#39;Hello&#39;&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/hello/{Name}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> Summary<span class="token operator">=</span><span class="token string">&quot;Says &#39;Hello&#39; to provided Name&quot;</span><span class="token punctuation">,</span> 
    Notes <span class="token operator">=</span> <span class="token string">&quot;Longer description of the POST method which says &#39;Hello&#39;&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre></div><p>You can also document your services in the OpenAPI with the new <code>[Api]</code> and <code>[ApiMember]</code> annotation attributes, e,g: Here&#39;s an example of a fully documented service:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Api</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Service Description&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Tag</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Core Requests&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiResponse</span><span class="token attribute-arguments"><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>BadRequest<span class="token punctuation">,</span> <span class="token string">&quot;Your request was not understood&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiResponse</span><span class="token attribute-arguments"><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>InternalServerError<span class="token punctuation">,</span> <span class="token string">&quot;Oops, something broke&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/swagger/{Name}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> Summary <span class="token operator">=</span> <span class="token string">&quot;GET Summary&quot;</span><span class="token punctuation">,</span> Notes <span class="token operator">=</span> <span class="token string">&quot;Notes&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/swagger/{Name}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> Summary <span class="token operator">=</span> <span class="token string">&quot;POST Summary&quot;</span><span class="token punctuation">,</span> Notes<span class="token operator">=</span><span class="token string">&quot;Notes&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequestDto</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name<span class="token operator">=</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span> Description <span class="token operator">=</span> <span class="token string">&quot;Name Description&quot;</span><span class="token punctuation">,</span>
        ParameterType <span class="token operator">=</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span> DataType <span class="token operator">=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> IsRequired <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiAllowableValues</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">//Enum</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Please note, that if you used <code>ApiMember.DataType</code> for annotating <code>OpenApiFeature</code> then you need to change the types to OpenAPI type when migrating to <code>OpenApiFeature</code>. For example, annotation of</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType<span class="token operator">=</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre></div><p>need to be changed to</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType<span class="token operator">=</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span> Format<span class="token operator">=</span><span class="token string">&quot;int32&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre></div><p>Here is the table for type migration</p><table><thead><tr><th>Swagger Type (DataType)</th><th>OpenAPI Type (DataType)</th><th>OpenAPI Format (Format)</th></tr></thead><tbody><tr><td>Array</td><td>array</td><td></td></tr><tr><td>boolean</td><td>boolean</td><td></td></tr><tr><td>byte</td><td>integer</td><td>int</td></tr><tr><td>Date</td><td>string</td><td>date</td></tr><tr><td></td><td>string</td><td>date-time</td></tr><tr><td>double</td><td>number</td><td>double</td></tr><tr><td>float</td><td>number</td><td>float</td></tr><tr><td>int</td><td>integer</td><td>int32</td></tr><tr><td>long</td><td>integer</td><td>int64</td></tr><tr><td>string</td><td>string</td><td></td></tr></tbody></table><p>You can use <code>[ApiAllowableValues]</code> lets you anotate enum properties as well as a restriction for values in array, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiAllowableValues</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Includes&quot;</span><span class="token punctuation">,</span> Values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;Genres&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Releases&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Contributors&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Includes <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The use of <code>ApiMember</code> turns your DTO properties as <strong>opt-in only</strong> for OpenApi metadata. Meaning that only properties annotated with <code>[ApiMember]</code> will be included in the OpenApi metadata for classes that use <code>[ApiMember]</code> on any of its properties.</p></div><h3 id="group-apis-with-tags" tabindex="-1">Group APIs with Tags <a class="header-anchor" href="#group-apis-with-tags" aria-hidden="true">#</a></h3><p>You can tag the DTO with <code>[Tag]</code> attribute. Attributes are annotated by the same tag are grouped by the tag name in Swagger UI. DTOs can have multiple tags, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Tag</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Core Features&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Tag</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Scheduler&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequest</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>You can Exclude <strong>properties</strong> from being listed in OpenAPI with:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IgnoreDataMember</span></span><span class="token punctuation">]</span>
</code></pre></div><p>Exclude <strong>properties</strong> from being listed in OpenAPI Schema Body with:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ExcludeInSchema<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre></div><h3 id="exclude-services-from-metadata-pages" tabindex="-1">Exclude Services from Metadata Pages <a class="header-anchor" href="#exclude-services-from-metadata-pages" aria-hidden="true">#</a></h3><p>To exclude entire Services from showing up in OpenAPI or any other Metadata Services (i.e. Metadata Pages, Postman, NativeTypes, etc), annotate <strong>Request DTO&#39;s</strong> with:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Exclude</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Feature<span class="token punctuation">.</span>Metadata<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequestDto</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="operation-filters" tabindex="-1">Operation filters <a class="header-anchor" href="#operation-filters" aria-hidden="true">#</a></h3><p>You can override operation or parameter definitions by specifying the appropriate filter in plugin configuration:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    OperationFilter <span class="token operator">=</span> <span class="token punctuation">(</span>verb<span class="token punctuation">,</span> operation<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> operation<span class="token punctuation">.</span>Tags<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;all operations&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Available configuration options:</p><ul><li><code>ApiDeclarationFilter</code> - allows to modify final result of returned OpenAPI json</li><li><code>OperationFilter</code> - allows to modify operations</li><li><code>SchemaFilter</code> - allows to modify OpenAPI schema for user types</li><li><code>SchemaPropertyFilter</code> - allows to modify propery declarations in OpenAPI schema</li></ul><h3 id="properties-naming-conventions" tabindex="-1">Properties naming conventions <a class="header-anchor" href="#properties-naming-conventions" aria-hidden="true">#</a></h3><p>You can control naming conventions of generated properties by following configuration options:</p><ul><li><code>UseCamelCaseSchemaPropertyNames</code> - generate camel case property names</li><li><code>UseLowercaseUnderscoreSchemaPropertyNames</code> - generate underscored lower cased property names (to enable this feature <code>UseCamelCaseModelPropertyNames</code> must also be set)</li></ul><p>Example:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    UseCamelCaseSchemaPropertyNames <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    UseLowercaseUnderscoreSchemaPropertyNames <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="change-default-verbs" tabindex="-1">Change default Verbs <a class="header-anchor" href="#change-default-verbs" aria-hidden="true">#</a></h3><p>If left unspecified, the <code>[Route]</code> attribute allows Services to be called from any HTTP Verb which by default are listed in the Open API specification under the most popular HTTP Verbs, namely <code>GET</code>, <code>POST</code>, <code>PUT</code> and <code>DELETE</code>.</p><p>This can be modified with <code>AnyRouteVerbs</code> which will let you specify which Verbs should be generated for <strong>ANY</strong> Routes with unspecified verbs, e.g. we can restrict it to only emit routes for <code>GET</code> and <code>POST</code> Verbs with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    AnyRouteVerbs <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> HttpMethods<span class="token punctuation">.</span>Get<span class="token punctuation">,</span> HttpMethods<span class="token punctuation">.</span>Post <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="miscellaneous-configuration-options" tabindex="-1">Miscellaneous configuration options <a class="header-anchor" href="#miscellaneous-configuration-options" aria-hidden="true">#</a></h3><ul><li><code>DisableAutoDtoInBodyParam</code> - disables adding <code>body</code> parameter for request DTO to operations</li><li><code>LogoUrl</code> - url of the logo image for Swagger UI</li></ul><p>Example:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    DisableAutoDtoInBodyParam <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="virtual-file-system" tabindex="-1">Virtual File System <a class="header-anchor" href="#virtual-file-system" aria-hidden="true">#</a></h2><p>The docs on the Virtual File System shows how to override embedded resources:</p><h3 id="overriding-openapi-embedded-resources" tabindex="-1">Overriding OpenAPI Embedded Resources <a class="header-anchor" href="#overriding-openapi-embedded-resources" aria-hidden="true">#</a></h3><p>ServiceStack&#39;s <a href="/virtual-file-system">Virtual File System</a> supports multiple file source locations where you can override OpenAPI&#39;s embedded files by including your own custom files in the same location as the existing embedded files. This lets you replace built-in ServiceStack embedded resources with your own by simply copying the <a href="https://github.com/ServiceStack/ServiceStack/tree/master/src/ServiceStack.Api.OpenApi/swagger-ui" target="_blank" rel="noopener noreferrer">/swagger-ui</a> files you want to customize and placing them in your Website Directory at:</p><div class="language-"><pre><code>/swagger-ui
    /css
    /fonts
    /images
    /lang
    /lib
    index.html
    swagger-ui.js
</code></pre></div><h4 id="injecting-custom-javascript" tabindex="-1">Injecting custom JavaScript <a class="header-anchor" href="#injecting-custom-javascript" aria-hidden="true">#</a></h4><p>As part of the customization you can add custom <code>patch.js</code> and <code>patch-preload.js</code>:</p><div class="language-"><pre><code>/swagger-ui
    patch.js
    patch-preload.js
</code></pre></div><p>which will be injected in the <code>/swagger-ui</code> index page, <code>patch-preload.js</code> is embedded before <code>swaggerUi.load()</code> is called:</p><div class="language-js"><pre><code><span class="token comment">// contents of patch-preload.js</span>

window<span class="token punctuation">.</span>swaggerUi<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>So you can use it to customize the <code>swaggerUi</code> configuration object before it&#39;s loaded, whilst <code>patch.js</code> is embedded just before the end of the <code>&lt;/body&gt;</code> tag, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>text/javascript<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// contents of patch.js</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="swagger-ui-security" tabindex="-1">Swagger UI Security <a class="header-anchor" href="#swagger-ui-security" aria-hidden="true">#</a></h3><p>There are 2 custom security methods supported <strong>Bearer</strong> and <strong>Basic Auth</strong>.</p><p>You can specify to use Swagger&#39;s support for API Key Authentication with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    UseBearerSecurity <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will instruct Swagger to use their API Key Authentication when clicking the <strong>Authorize</strong> button which will be sent in API requests to your Authenticated Services. As the <strong>value</strong> field is for the entire Authorization HTTP Header you&#39;d need to add your JWT Token or API Key prefixed with <code>Bearer </code>:</p><p><img src="`+h+`" alt=""></p><p>Which you can use to use to Authenticate with &quot;Bearer token&quot; Auth Providers like <a href="/api-key-authprovider">API Key</a> and <a href="/jwt-authprovider">JWT Auth Providers</a>.</p><h3 id="basic-auth-in-openapi" tabindex="-1">Basic Auth in OpenAPI <a class="header-anchor" href="#basic-auth-in-openapi" aria-hidden="true">#</a></h3><p>You can instruct Swagger to use HTTP Basic Auth with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    UseBasicSecurity <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This lets Users call protected Services using the Username and Password fields in Swagger UI. Swagger UI sends these credentials with every API request using HTTP Basic Auth, which can be enabled in your AppHost with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Allow Sign-ins with HTTP Basic Auth</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To login, you need to click &quot;Authorize&quot; button.</p><p><img src="`+e+'" alt=""></p><p>And then enter username and password.</p><p><img src="'+t+'" alt=""></p><p>Also you can click &quot;Try it out&quot; button on services, which requires authentication and browser will prompt a window with user/password field for entering basic auth credentials.</p><p>Alternatively you can authenticate outside Swagger (e.g. via an OAuth Provider) which will also let you call protected Services in <code>/swagger-ui</code>.</p><h2 id="generating-autorest-client" tabindex="-1">Generating AutoRest client <a class="header-anchor" href="#generating-autorest-client" aria-hidden="true">#</a></h2><p>You can use OpenAPI plugin to automatically generate client using <a href="https://github.com/Azure/Autorest" target="_blank" rel="noopener noreferrer">Autorest</a>. To use AutoRest first install it from npm:</p>',80),A=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"npm install -g autorest")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),S=n("p",null,"Then you need to download the Open API specification for your Services using a tool like curl:",-1),P=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,[a("curl "),n("a",{href:"http://your.domain/openapi",target:"_blank",rel:"noopener noreferrer"},"http://your.domain/openapi"),a(" > openapi.json")])])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),q=n("p",null,[a("Or using "),n("code",null,"iwr"),a(" if you have PowerShell installed:")],-1),_=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,[a("iwr "),n("a",{href:"http://your.domain/openapi",target:"_blank",rel:"noopener noreferrer"},"http://your.domain/openapi"),a(" -o openapi.json")])])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),T=n("p",null,[a("You can then use the "),n("code",null,"openapi.json"),a(" with autorest to generate a client for your API in your preferred language, e.g:")],-1),x=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"autorest --latest-release -Input openapi.json -CodeGenerator CSharp -OutputDirectory AutoRestClient -Namespace AutoRestClient")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),I=s(`<p>This will generate directory containing your model types and REST operations that you can use with the generated client, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SampleProjectAutoRestClient</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:20000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> dto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SampleDto</span> <span class="token punctuation">{</span> <span class="token comment">/* .... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>SampleOperation<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">body</span><span class="token punctuation">:</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// process result</span>
<span class="token punctuation">}</span>
</code></pre></div><p>AutoRest clients will allow usage of tooling that have adopted AutoRest and is a good stop gap solution for generating native clients for languages that <a href="/add-servicestack-reference">Add ServiceStack Reference</a> doesn&#39;t support yet like Python and Ruby.</p><h3 id="autorest-generated-clients-vs-add-servicestack-reference" tabindex="-1">AutoRest Generated Clients vs Add ServiceStack Reference <a class="header-anchor" href="#autorest-generated-clients-vs-add-servicestack-reference" aria-hidden="true">#</a></h3><p>However AutoRest generated clients are similar to WCF Service Reference generated clients where it generates RPC-style Clients that emits both implementation logic and models for sending each request that&#39;s coupled to external HttpClient and <a href="http://JSON.NET" target="_blank" rel="noopener noreferrer">JSON.NET</a> dependencies. This approach generates significantly more code generation that populates a directory containing <a href="https://github.com/ServiceStack/ServiceStack/tree/master/tests/ServiceStack.OpenApi.Tests/GeneratedClient" target="_blank" rel="noopener noreferrer">multiple implementation and Model classes</a> generated for each Service.</p><p>In contrast <a href="/add-servicestack-reference">Add ServiceStack Reference</a> adopts the venerable <a href="https://martinfowler.com/eaaCatalog/dataTransferObject.html" target="_blank" rel="noopener noreferrer">Data Transfer Object</a>, <a href="https://martinfowler.com/eaaCatalog/gateway.html" target="_blank" rel="noopener noreferrer">Gateway</a> and <a href="https://martinfowler.com/eaaCatalog/remoteFacade.html" target="_blank" rel="noopener noreferrer">Remote Facade</a> Service patterns where it only needs to generate clean, implementation-free DTO models that it captures in <strong>a single source file</strong> for all supported languages.</p><p>The generated DTOs are cleaner and more reusable where it isn&#39;t coupled to any Serialization implementation and can be reused in any of ServiceStack&#39;s message-based <a href="/csharp-client#httpwebrequest-service-clients">Service Clients and Serialization Formats</a> or different <a href="/service-gateway">Service Gateway</a> implementations. The models are also richer where it&#39;s able to include additional metadata attributes and marker interfaces that isn&#39;t possible when tunneling through a generic API specification.</p><p>The use of intelligent generic Service Clients will always be able to provide a richer more productive development experience that can enable higher-level, value-added functionality like <a href="/error-handling">Structured Error Handling</a>, <a href="/cache-aware-clients">Smart HTTP Caching</a>, <a href="/auto-batched-requests">Auto Batching</a>, <a href="/encrypted-messaging#encrypted-service-client">Encrypted Messaging</a>, <a href="/autoquery-rdbms#service-clients-support">AutoQuery Streaming</a>, <a href="/csharp-client#client--server-request-compression">Request Compression</a>, integrated authentication and lots more.</p><h3 id="known-issues" tabindex="-1">Known issues <a class="header-anchor" href="#known-issues" aria-hidden="true">#</a></h3><p>Autorest generated clients do not support <code>application/octet-stream</code> MIME type, which is used when service returns <code>byte[]</code> array. You can track <a href="https://github.com/Azure/autorest/issues/1932" target="_blank" rel="noopener noreferrer">this issue on Github</a>.</p><h2 id="publish-azure-management-api" tabindex="-1">Publish Azure Management API <a class="header-anchor" href="#publish-azure-management-api" aria-hidden="true">#</a></h2><p>Login to <a href="https://portal.azure.com" target="_blank" rel="noopener noreferrer">Azure Portal</a> and search for <code>API management service</code>.</p><p><img src="`+m+'" alt=""></p><p>Choose <code>API management service</code>. In opened window click <code>Add</code> button.</p><p><img src="'+o+'" alt=""></p><p>Fill the creation form. Put your own values in <code>Name</code>, <code>Resource Group</code>, <code>Organization name</code> and <code>Administrator email</code>. When creation form will be ready, click <code>Create</code> button.</p><p><img src="'+p+'" alt=""></p><p>Wait while Management API will be activated. It can take more than forty minutes. When it ready click on created API management resource.</p><p><img src="'+c+'" alt=""></p><p>In opened window click <code>APIs - PREVIEW</code> menu item on the left pane.</p><p><img src="'+i+'" alt=""></p><p>Choose <code>OpenAPI specification</code> in <code>Add API</code> section.</p><p><img src="'+r+'" alt=""></p><p>Fill the url with location of you services, ended with <code>/openapi</code> or just click <code>Upload</code> button and upload OpenAPI json definition, which is available at <code>/openapi</code> path of your services.</p><p><img src="'+l+'" alt=""></p><p>After successfull import you should see list of available operations for your services</p><p><img src="'+u+'" alt=""></p>',27),O=[v,b,f,y,A,S,P,q,_,T,x,I];function M(R,C,j,N,V,D){return g(),k("div",null,O)}var H=d(w,[["render",M]]);export{B as __pageData,H as default};
